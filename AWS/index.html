<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS SAA-C03 Exam Tracker</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/inter-ui/3.19.3/inter.css" rel="stylesheet">
    <style>
        :root {
            --bg-color: #0f111a;
            --card-bg: #1a1d29;
            --card-hover: #232736;
            --text-main: #e0e6ed;
            --text-muted: #94a3b8;
            --accent-color: #FF9900;
            --core-color: #F59E0B;
            --medium-color: #3B82F6;
            --awareness-color: #64748B;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --font-stack: 'Inter', system-ui, sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: var(--font-stack);
            overflow-x: hidden;
            padding-bottom: 5rem;
        }

        /* --- Header --- */
        header {
            padding: 4rem 2rem 2rem;
            max-width: 900px;
            margin: 0 auto;
            text-align: center;
        }

        h1 {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #fff 0%, var(--accent-color) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header-meta {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .meta-tag {
            background: rgba(255, 255, 255, 0.05);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            border: 1px solid rgba(255,255,255,0.1);
            color: var(--text-muted);
        }

        /* --- Progress Bar --- */
        .progress-wrapper {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(15, 17, 26, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1.5rem;
        }

        .progress-track {
            width: 100%;
            max-width: 600px;
            height: 12px;
            background: rgba(255,255,255,0.1);
            border-radius: 6px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--accent-color), #fcd34d);
            border-radius: 6px;
            box-shadow: 0 0 15px rgba(255, 153, 0, 0.3);
        }

        .progress-stats {
            font-family: monospace;
            font-weight: 700;
            white-space: nowrap;
            min-width: 180px;
            text-align: right;
        }

        /* --- Main Content --- */
        .category-container {
            max-width: 1200px;
            margin: 0 auto 3rem;
            padding: 0 2rem;
        }

        .patterns-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 4rem;
        }

        .pattern-card {
            background: linear-gradient(145deg, #1e2230, #161822);
            border: 1px solid rgba(255,255,255,0.05);
            padding: 1.5rem;
            border-radius: 16px;
        }

        .category-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.5rem;
        }

        /* --- Service Card --- */
        .service-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid rgba(255,255,255,0.05);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: background 0.2s, border-color 0.2s;
        }

        .service-card:focus-visible {
            outline: 2px solid var(--accent-color);
            outline-offset: 2px;
        }

        .service-card:hover {
            transform: translateY(-2px);
            background: var(--card-hover);
            border-color: rgba(255,255,255,0.1);
        }

        .service-card.expanded {
            grid-column: 1 / -1;
            background: #1e2230;
            border-color: var(--accent-color);
            cursor: default;
        }

        .service-card.expanded:hover { transform: none; }

        .card-status-bar {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: transparent;
            transition: background 0.3s;
        }

        .service-card.learned .card-status-bar { background: var(--success-color); }
        .service-card.learned { border-color: rgba(16, 185, 129, 0.3); }

        .service-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.5rem;
            padding-left: 10px;
        }

        .service-name {
            font-weight: 700;
            font-size: 1.2rem;
            color: #fff;
        }

        .exam-badge {
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .badge-core { border: 1px solid var(--core-color); color: var(--core-color); background: rgba(245, 158, 11, 0.1); }
        .badge-medium { border: 1px solid var(--medium-color); color: var(--medium-color); background: rgba(59, 130, 246, 0.1); }
        .badge-awareness { border: 1px solid var(--awareness-color); color: var(--awareness-color); background: rgba(100, 116, 139, 0.1); }

        .service-desc {
            color: var(--text-muted);
            font-size: 0.95rem;
            line-height: 1.5;
            padding-left: 10px;
        }

        /* --- Expanded Content --- */
        .expanded-content {
            display: none;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            padding-left: 10px;
        }
        
        .detail-row {
            display: grid;
            grid-template-columns: 140px 1fr;
            gap: 1rem;
            margin-bottom: 1.2rem;
        }

        .detail-label {
            font-weight: 600;
            color: var(--accent-color);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .detail-text {
            color: #d1d5db;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .trap-row .detail-label { color: var(--danger-color); }
        .trap-row .detail-text { color: #fca5a5; }

        .master-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.8rem;
            margin-top: 1rem;
            padding: 0.8rem 1.5rem;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            color: #fff;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
            outline: none;
        }

        .master-btn:hover, .master-btn:focus-visible {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--success-color);
        }

        .service-card.learned .master-btn {
            background: var(--success-color);
            border-color: var(--success-color);
            color: #0f111a;
        }

        .lil-gui { --background-color: #1a1d29; --text-color: #e0e6ed; --title-background-color: #FF9900; }
    </style>
</head>
<body>

    <header>
        <div class="header-meta">
            <span class="meta-tag">Exam: SAA-C03</span>
            <span class="meta-tag">Updated: 2026</span>
            <span class="meta-tag" style="border-color: var(--core-color); color: var(--core-color)">üî• Very High Priority</span>
        </div>
        <h1>AWS Solutions Architect</h1>
    </header>

    <div class="progress-wrapper">
        <div class="progress-track">
            <div class="progress-fill" id="progressBar"></div>
        </div>
        <div class="progress-stats" id="progressText">0% Readiness</div>
    </div>

    <div class="category-container">
        <div class="patterns-grid">
            <div class="pattern-card">
                <h3 style="color:var(--accent-color); margin-bottom:0.5rem">üèóÔ∏è Decoupled & Stateless</h3>
                <p style="font-size:0.9rem; color:var(--text-muted)">Scale components independently (SQS). Store session state in DynamoDB/ElastiCache, not on the instance.</p>
            </div>
            <div class="pattern-card">
                <h3 style="color:var(--accent-color); margin-bottom:0.5rem">‚ö° Event-Driven</h3>
                <p style="font-size:0.9rem; color:var(--text-muted)">S3 Upload ‚Üí EventBridge ‚Üí Lambda ‚Üí SNS. React to changes instantly without polling.</p>
            </div>
            <div class="pattern-card">
                <h3 style="color:var(--accent-color); margin-bottom:0.5rem">üõ°Ô∏è Multi-AZ Fault Tolerance</h3>
                <p style="font-size:0.9rem; color:var(--text-muted)">Always assume failure. Deploy across at least 2 AZs. Use Auto Scaling and Elastic Load Balancing.</p>
            </div>
        </div>
    </div>

    <main id="app"></main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Flip.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lil-gui@0.18.0/dist/lil-gui.umd.min.js"></script>

    <script>
        gsap.registerPlugin(Flip);

        // --- 1. NEW SYLLABUS DATA ---
        // Weights: core (Very High), medium (High), awareness (Medium)
        const awsData = [
            {
                title: "1. Compute & Scaling üî•",
                services: [
                    { 
                        id: "ec2", name: "EC2 Core", weight: "core",
                        desc: "Virtual servers. Know families, placement, and boot logic.",
                        useCase: "Long-running workloads, legacy apps.",
                        notes: "‚Ä¢ Families: General, Compute (C), Memory (R), Storage (I/D)<br>‚Ä¢ User Data: Scripts run on first boot only.<br>‚Ä¢ Placement Groups: Cluster (Speed), Spread (Safety), Partition (Hadoop).<br>‚Ä¢ ENI vs Instance Store (Ephemeral/Fast) vs EBS (Persistent).",
                        trap: "Scaling EC2 manually instead of using ASG."
                    },
                    { 
                        id: "asg", name: "Auto Scaling (ASG)", weight: "core",
                        desc: "Scale capacity based on demand.",
                        useCase: "Stateless web apps, handling traffic spikes.",
                        notes: "‚Ä¢ Target Tracking: 'Keep CPU at 50%'.<br>‚Ä¢ Step Scaling: 'Add 2 if CPU > 80%'.<br>‚Ä¢ Health Checks: EC2 (Hardware) vs ELB (Application).<br>‚Ä¢ Scale-in protection: Don't kill busy instances.",
                        trap: "Thinking ASG is just for growth; it's also for self-healing (replacing bad nodes)."
                    },
                    { 
                        id: "elb", name: "Elastic Load Balancer", weight: "core",
                        desc: "Traffic distribution.",
                        useCase: "Single entry point for apps.",
                        notes: "‚Ä¢ ALB (L7): Path-based routing, Sticky Sessions (Cookies), Containers.<br>‚Ä¢ NLB (L4): Millions of requests/sec, Static IP, TCP/UDP.<br>‚Ä¢ GWLB: For 3rd party firewalls.",
                        trap: "Using ALB for TCP/UDP traffic (Must use NLB)."
                    },
                    { 
                        id: "lambda", name: "Lambda", weight: "core",
                        desc: "Serverless compute.",
                        useCase: "Event-driven, <15 min jobs.",
                        notes: "‚Ä¢ Timeout: Max 15 mins.<br>‚Ä¢ Concurrency: Reserved (Guaranteed) vs Provisioned (No Cold Starts).<br>‚Ä¢ Event Sources: S3, API Gateway, SQS.",
                        trap: "Running >15 min workloads (Use ECS/Batch instead)."
                    }
                ]
            },
            {
                title: "2. Storage üî•",
                services: [
                    { 
                        id: "s3", name: "S3", weight: "core",
                        desc: "Object storage backbone.",
                        useCase: "Static sites, Data Lakes, Backups.",
                        notes: "‚Ä¢ Classes: Standard, IA, One Zone-IA, Glacier (Retrieval times!), Deep Archive.<br>‚Ä¢ Features: Lifecycle Rules, Versioning (Required for MFA Delete), Encryption (SSE-S3/KMS/C).",
                        trap: "Using S3 for a file system (POSIX) - Use EFS."
                    },
                    { 
                        id: "ebs", name: "EBS", weight: "core",
                        desc: "Block storage for EC2.",
                        useCase: "OS Drives, Databases on EC2.",
                        notes: "‚Ä¢ Types: gp3 (General), io2 (High Perf DB), st1/sc1 (HDD - Big Data).<br>‚Ä¢ Snapshots: Incremental & Region-scoped.",
                        trap: "Trying to attach one EBS to instances in different AZs (Impossible)."
                    },
                    { 
                        id: "efs", name: "EFS", weight: "core",
                        desc: "Managed NFS File System.",
                        useCase: "Shared storage for Linux instances (Web servers, CMS).",
                        notes: "‚Ä¢ POSIX compliant.<br>‚Ä¢ Mount targets in each AZ.<br>‚Ä¢ Works with EC2, ECS, Lambda.",
                        trap: "Using EFS for Windows (Use FSx for Windows)."
                    },
                    { 
                        id: "fsx", name: "FSx", weight: "core",
                        desc: "Specialized File Systems.",
                        useCase: "Windows or High Performance Computing (HPC).",
                        notes: "‚Ä¢ FSx for Windows: SMB protocol, AD integration.<br>‚Ä¢ FSx for Lustre: S3 integration, HPC.",
                        trap: ""
                    }
                ]
            },
            {
                title: "3. Databases üî•",
                services: [
                    { 
                        id: "rds", name: "RDS", weight: "core",
                        desc: "Managed Relational DB.",
                        useCase: "Structured data, complex queries.",
                        notes: "‚Ä¢ Multi-AZ: Synchronous replication (Disaster Recovery).<br>‚Ä¢ Read Replicas: Asynchronous (Performance scaling).<br>‚Ä¢ Encryption: Must be done at creation.",
                        trap: "Using Multi-AZ for performance (It's for DR). Use Read Replicas for performance."
                    },
                    { 
                        id: "aurora", name: "Aurora", weight: "core",
                        desc: "AWS-optimized Relational.",
                        useCase: "Enterprise scale RDS.",
                        notes: "‚Ä¢ 1 Writer, up to 15 Readers.<br>‚Ä¢ Serverless v2: Instant scaling.<br>‚Ä¢ Auto-failover is faster than standard RDS.",
                        trap: ""
                    },
                    { 
                        id: "dynamo", name: "DynamoDB", weight: "core",
                        desc: "NoSQL Key-Value.",
                        useCase: "Massive scale, simple queries.",
                        notes: "‚Ä¢ Primary Key: Partition Key + (Optional) Sort Key.<br>‚Ä¢ On-demand vs Provisioned (predictable load).<br>‚Ä¢ DAX: In-memory cache for Dynamo.<br>‚Ä¢ TTL: Auto-delete old items.",
                        trap: "Using RDS for massive, flat data scale (Use DynamoDB)."
                    },
                    { 
                        id: "elasticache", name: "ElastiCache", weight: "core",
                        desc: "In-memory caching.",
                        useCase: "Microsecond latency, DB offloading.",
                        notes: "‚Ä¢ Redis: Complex data, persistence, Multi-AZ.<br>‚Ä¢ Memcached: Simple string cache, multi-thread.",
                        trap: "Using Redis as a primary persistent database."
                    }
                ]
            },
            {
                title: "4. Networking üî•",
                services: [
                    { 
                        id: "vpc", name: "VPC Core", weight: "core",
                        desc: "Network isolation.",
                        useCase: "Foundational network.",
                        notes: "‚Ä¢ Public Subnet: Has Route to IGW.<br>‚Ä¢ Private Subnet: Route to NAT Gateway.<br>‚Ä¢ NACL (Stateless/Subnet level) vs SG (Stateful/Instance level).",
                        trap: "Thinking Security Groups are stateless (They are Stateful)."
                    },
                    { 
                        id: "route53", name: "Route 53", weight: "core",
                        desc: "DNS & Health Checks.",
                        useCase: "Routing users to endpoints.",
                        notes: "‚Ä¢ Policies: Simple, Weighted (A/B testing), Latency (Performance), Failover (DR), Geolocation (Compliance).",
                        trap: ""
                    },
                    { 
                        id: "cloudfront", name: "CloudFront", weight: "core",
                        desc: "CDN.",
                        useCase: "Global caching for static AND dynamic content.",
                        notes: "‚Ä¢ Origins: S3, ALB, EC2.<br>‚Ä¢ Signed URLs: Private content access.",
                        trap: "Thinking CloudFront is only for static sites (It caches APIs too)."
                    }
                ]
            },
            {
                title: "5. Security & Identity üî•",
                services: [
                    { 
                        id: "iam", name: "IAM", weight: "core",
                        desc: "Access Control.",
                        useCase: "Authentication & Authorization.",
                        notes: "‚Ä¢ Role: Temp access for EC2/Lambda/Cross-Account.<br>‚Ä¢ Policy Logic: Explicit Deny > Explicit Allow > Implicit Deny.",
                        trap: "Hardcoding credentials in code (Use Roles)."
                    },
                    { 
                        id: "kms", name: "KMS", weight: "core",
                        desc: "Encryption Keys.",
                        useCase: "Managing encryption at rest.",
                        notes: "‚Ä¢ CMK (Customer Managed) vs AWS Managed.<br>‚Ä¢ Key rotation.",
                        trap: ""
                    },
                    { 
                        id: "orgs", name: "Organizations", weight: "core",
                        desc: "Multi-account management.",
                        useCase: "Billing and Policies.",
                        notes: "‚Ä¢ SCP (Service Control Policy): Restrict permissions across accounts.",
                        trap: "Bucket policy ignored? Check if SCP has an explicit deny."
                    }
                ]
            },
            {
                title: "6. Application Integration (High)",
                services: [
                    { 
                        id: "sqs", name: "SQS", weight: "medium",
                        desc: "Message Queues.",
                        useCase: "Decoupling and buffering.",
                        notes: "‚Ä¢ Standard: Unlimited throughput, best-effort ordering.<br>‚Ä¢ FIFO: Strict ordering, exactly-once, limited throughput.<br>‚Ä¢ Visibility Timeout: Hides message while processing.",
                        trap: "Using SNS for buffering (SNS is push, SQS is poll/buffer)."
                    },
                    { 
                        id: "sns", name: "SNS", weight: "medium",
                        desc: "Pub/Sub Messaging.",
                        useCase: "Fan-out architecture.",
                        notes: "‚Ä¢ Topic sends to SQS, Lambda, Email, SMS.",
                        trap: ""
                    },
                    { 
                        id: "step", name: "Step Functions", weight: "medium",
                        desc: "Orchestration.",
                        useCase: "Complex workflows with state.",
                        notes: "‚Ä¢ Handles retries, branches, parallel execution.",
                        trap: "Chaining Lambdas directly (Anti-pattern: creates tight coupling)."
                    }
                ]
            },
            {
                title: "7. Monitoring (High)",
                services: [
                    { 
                        id: "cloudwatch", name: "CloudWatch", weight: "medium",
                        desc: "Metrics & Logs.",
                        useCase: "Performance monitoring.",
                        notes: "‚Ä¢ Metrics (CPU, Disk).<br>‚Ä¢ Alarms (Trigger ASG).<br>‚Ä¢ Logs (App output).",
                        trap: "Thinking CloudWatch Logs are on by default for EC2 (Must install agent)."
                    },
                    { 
                        id: "cloudtrail", name: "CloudTrail", weight: "medium",
                        desc: "Auditing.",
                        useCase: "Compliance and Security Analysis.",
                        notes: "‚Ä¢ Logs WHO did WHAT and WHEN (API calls).",
                        trap: "Using CloudTrail for performance metrics (That's CloudWatch)."
                    }
                ]
            },
            {
                title: "8. Migration & Hybrid (Medium)",
                services: [
                    { 
                        id: "storagegw", name: "Storage Gateway", weight: "awareness",
                        desc: "Hybrid Storage.",
                        useCase: "On-prem extension.",
                        notes: "‚Ä¢ File Gateway (NFS/SMB to S3).<br>‚Ä¢ Volume Gateway (iSCSI to EBS).<br>‚Ä¢ Tape Gateway (VTL to Glacier)."
                    },
                    { 
                        id: "dms", name: "DMS & DataSync", weight: "awareness",
                        desc: "Data Transfer.",
                        useCase: "Moving DBs or Files.",
                        notes: "‚Ä¢ DMS: Database migration (keep source running).<br>‚Ä¢ DataSync: Fast file transfer (NAS to S3)."
                    },
                    { 
                        id: "snow", name: "Snow Family", weight: "awareness",
                        desc: "Offline Data Transfer.",
                        useCase: "No internet/Low bandwidth.",
                        notes: "‚Ä¢ Snowcone (Small).<br>‚Ä¢ Snowball Edge (TB scale + Compute).<br>‚Ä¢ Snowmobile (Exabyte container)."
                    }
                ]
            },
            {
                title: "9. Cost Management (Medium)",
                services: [
                    { 
                        id: "cost", name: "Savings & RIs", weight: "awareness",
                        desc: "Optimization.",
                        useCase: "Saving money on long-term commitments.",
                        notes: "‚Ä¢ RIs: Specific instance types.<br>‚Ä¢ Savings Plans: Flexible (Compute/EC2).<br>‚Ä¢ Spot: Up to 90% off, but interruptible.",
                        trap: "Using Spot for critical workloads without fallback."
                    }
                ]
            },
            {
                title: "10. Architecture Patterns üî•",
                services: [
                    {
                        id: "patterns", name: "Design Patterns", weight: "core",
                        desc: "Exam Gold Concepts.",
                        useCase: "How to think like an Architect.",
                        notes: "1. Decouple everything (SQS).<br>2. Stateless apps (Scale easier).<br>3. Multi-AZ is non-negotiable.<br>4. Caching at every layer (CloudFront > ElastiCache > DAX).",
                        trap: "Storing session data on the EC2 instance (User gets logged out if instance dies)."
                    }
                ]
            }
        ];

        const WEIGHTS = { core: 3, medium: 2, awareness: 1 };

        // --- 2. STATE ---
        let state = {
            learned: new Set(JSON.parse(localStorage.getItem('aws_saa_updated_learned')) || [])
        };

        // --- 3. RENDER ---
        const app = document.getElementById('app');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');

        function getBadge(weight) {
            const map = {
                core: { cls: 'badge-core', txt: 'üî• Core' },
                medium: { cls: 'badge-medium', txt: 'High Priority' },
                awareness: { cls: 'badge-awareness', txt: 'Medium' }
            };
            return map[weight] || map.awareness;
        }

        function render() {
            app.innerHTML = '';
            
            awsData.forEach(category => {
                const section = document.createElement('section');
                section.className = 'category-container';
                
                const grid = document.createElement('div');
                grid.className = 'services-grid';

                category.services.forEach(service => {
                    const badge = getBadge(service.weight);
                    const isLearned = state.learned.has(service.id);
                    
                    const card = document.createElement('div');
                    card.className = `service-card ${isLearned ? 'learned' : ''}`;
                    card.setAttribute('data-id', service.id);
                    card.setAttribute('tabindex', '0');
                    card.setAttribute('role', 'button');
                    card.setAttribute('aria-expanded', 'false');

                    card.innerHTML = `
                        <div class="card-status-bar"></div>
                        <div class="service-header">
                            <span class="service-name">${service.name}</span>
                            <span class="exam-badge ${badge.cls}">${badge.txt}</span>
                        </div>
                        <div class="service-desc">${service.desc}</div>
                        
                        <div class="expanded-content">
                            <div class="detail-row">
                                <span class="detail-label">Context</span>
                                <span class="detail-text">${service.useCase}</span>
                            </div>
                            ${service.notes ? `
                            <div class="detail-row">
                                <span class="detail-label">Key Concepts</span>
                                <span class="detail-text">${service.notes}</span>
                            </div>` : ''}
                            ${service.trap ? `
                            <div class="detail-row trap-row">
                                <span class="detail-label">‚ö†Ô∏è Exam Trap</span>
                                <span class="detail-text">${service.trap}</span>
                            </div>` : ''}
                            
                            <button class="master-btn" data-action="toggle-mastery">
                                ${isLearned ? '‚úì Mastered' : 'Mark as Mastered'}
                            </button>
                        </div>
                    `;
                    grid.appendChild(card);
                });

                section.innerHTML = `<h2 class="category-title">${category.title}</h2>`;
                section.appendChild(grid);
                app.appendChild(section);
            });

            updateStats();
        }

        // --- 4. EVENTS ---
        app.addEventListener('click', (e) => {
            const card = e.target.closest('.service-card');
            if (!card) return;

            if (e.target.closest('[data-action="toggle-mastery"]')) {
                const id = card.dataset.id;
                toggleMastery(id, card);
                e.stopPropagation();
                return;
            }
            toggleExpand(card);
        });

        app.addEventListener('keydown', (e) => {
            const card = e.target.closest('.service-card');
            if (!card) return;
            if (e.key === 'Enter' || e.key === ' ') {
                if (e.target.tagName === 'BUTTON') return;
                e.preventDefault();
                toggleExpand(card);
            }
        });

        function toggleExpand(card) {
            const state = Flip.getState(".service-card");
            const isExpanding = !card.classList.contains('expanded');

            document.querySelectorAll('.service-card.expanded').forEach(c => {
                if (c !== card) {
                    c.classList.remove('expanded');
                    c.querySelector('.expanded-content').style.display = 'none';
                }
            });

            card.classList.toggle('expanded');
            const content = card.querySelector('.expanded-content');
            content.style.display = isExpanding ? 'block' : 'none';

            Flip.from(state, {
                duration: 0.4,
                ease: "power3.inOut",
                absolute: true,
                onComplete: () => {
                    if(isExpanding) card.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            });
        }

        function toggleMastery(id, cardElement) {
            if (state.learned.has(id)) {
                state.learned.delete(id);
                cardElement.classList.remove('learned');
                cardElement.querySelector('.master-btn').innerHTML = 'Mark as Mastered';
            } else {
                state.learned.add(id);
                cardElement.classList.add('learned');
                cardElement.querySelector('.master-btn').innerHTML = '‚úì Mastered';
                gsap.fromTo(cardElement, {scale: 0.98}, {scale: 1, duration: 0.2, ease: "back.out(2)"});
            }
            localStorage.setItem('aws_saa_updated_learned', JSON.stringify([...state.learned]));
            updateStats();
        }

        function updateStats() {
            let totalPoints = 0;
            let earnedPoints = 0;

            awsData.forEach(cat => {
                cat.services.forEach(srv => {
                    const points = WEIGHTS[srv.weight] || 1;
                    totalPoints += points;
                    if (state.learned.has(srv.id)) earnedPoints += points;
                });
            });

            const percentage = totalPoints === 0 ? 0 : Math.round((earnedPoints / totalPoints) * 100);
            gsap.to(progressBar, { width: `${percentage}%`, duration: 1, ease: "power2.out" });
            progressText.innerText = `Exam Readiness: ${percentage}%`;
        }

        // --- 5. INIT ---
        render();

        gsap.from(".category-container", {
            y: 30, opacity: 0, duration: 0.8, stagger: 0.1, ease: "power2.out"
        });

        const params = {
            reset: () => {
                if(confirm("Reset all progress?")) {
                    state.learned.clear();
                    localStorage.removeItem('aws_saa_updated_learned');
                    render();
                }
            }
        };
        const gui = new lil.GUI({ title: 'Controls' });
        gui.add(params, 'reset').name('‚ö† Reset Data');

    </script>
</body>
</html>